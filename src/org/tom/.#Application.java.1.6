package org.tom;

import java.io.File;
import java.io.IOException;
import java.util.ArrayList;

import org.apache.uima.UIMAException;
import org.apache.uima.UIMAFramework;
import org.apache.uima.analysis_engine.AnalysisEngine;
import org.apache.uima.analysis_engine.AnalysisEngineDescription;
import org.apache.uima.cas.CAS;
import org.apache.uima.util.XMLInputSource;

public class Application {
	
	FileManipulation fileManipulation = new FileManipulation();
	
	public void getItemsInformation(String analyseEngine, String viewName, String filePath) throws UIMAException, IOException{
	    XMLInputSource input = new XMLInputSource("descriptors/" + analyseEngine + ".xml");
	    AnalysisEngineDescription desc = UIMAFramework.getXMLParser().parseAnalysisEngineDescription(input);
	    AnalysisEngine seAnnotator = UIMAFramework.produceAnalysisEngine(desc);
	    
	    CAS cas = seAnnotator.newCAS();
	    CAS view = cas.createView(viewName);

	    view.setDocumentText(fileManipulation.fileToString(new File(filePath)));
	    
	    seAnnotator.process(cas);
	    seAnnotator.destroy();
	}
      
    public void analyseProject(String filePath){
    	try {
    		getItemsInformation("vision/aeNeed", "NeedDocument", filePath);
    		getItemsInformation("vision/aeFeatureItem", "NeedDocument", filePath);
			getItemsInformation("model/XMIActorAE", "ActorDocument", filePath);
			/*getItemsInformation("XMIDataTypeAE", "DataTypeDocument", filePath);
			getItemsInformation("XMIUseCaseAE", "UseCaseDocument", filePath);
			getItemsInformation("XMIClassAE", "ClassDocument", filePath);
			getItemsInformation("XMIAssociationAE", "AssociationDocument", filePath);
			getItemsInformation("XMIExtendAE", "ExtendDocument", filePath);
			getItemsInformation("XMIIncludeAE", "IncludeDocument", filePath);
			getItemsInformation("XMIGeneralizationAE", "GeneralizationDocument", filePath);*/
		} catch (UIMAException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
    }

}
